<html>
<style>
.guilds {
	height: 100%;

	display: flex;

	flex-wrap: wrap;
	justify-content: space-evenly;
	align-content: center;
}

.guild-card {
	margin: 20px;
	height: 100px;
	width: 100px;

	border-radius: 50%;

	font-size: 30px;
	text-decoration: none;

	display: flex;
	justify-content: center;
	align-items: center;

	background: var(--c-grey-2);
	transition: transform 1s;
}

.guild-card:hover {
	transform: scale(1.2);
}

.guild-icon {
	width: 100%;
	height: auto;

	border-radius: 50%;
}

</style>

<body>
	<title>Cryptobutler - Configuration</title>
	<% coins = TB::Data::Coin.read_all %>
	<!-- GUILDS -->
	<% if guild_array = env.session.object?("admin_guilds") %>
		<% guilds = guild_array.guilds %>
		<div class="guilds">
		<% guilds.each do |guild| %>
			<% configs = TB::Data::Discord::Guild.read_by_guild_id(guild.id) %>
			<a class="guild-card" href="/configuration/guild?guild_id=<%= guild.id %>">
			<% if guild.icon %>
				<%= "<img class=\"guild-icon\" src=\"https://cdn.discordapp.com/icons/#{guild.id}/#{guild.icon}.png\"/>" %>
			<% else %>
				<%= "<span>#{guild.name.scan(/\b\w|-/).join(" ", &.[0][0])}</span>" %>
			<% end %>
			</a>
		<% end %>
		<a href="/auth/discord?scope=guilds" style="padding: 20px">
			<svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="100px" height="100px" viewBox="0 0 1159.000000 1280.000000" preserveAspectRatio="xMidYMid meet">
				<metadata>Created by potrace 1.15, written by Peter Selinger 2001-2017</metadata>
				<g transform="translate(0.000000,1280.000000) scale(0.100000,-0.100000)" fill="#E9E9E9" stroke="none">
					<path d="M3888 12791 c-20 -4 -43 -12 -50 -18 -7 -6 -37 -13 -66 -16 -64 -7 -74 -13 -195 -104 -219 -165 -328 -376 -313 -609 6 -101 15 -132 87 -280 26 -55 76 -165 109 -245 34 -79 112 -241 174 -359 63 -118 292 -557 511 -975 764 -1460 1225 -2320 1363 -2538 32 -51 69 -112 81 -137 48 -95 191 -272 257 -320 57 -40 200 -95 301 -114 100 -19 152 -12 324 45 225 74 209 58 576 577 72 102 175 261 229 354 54 92 101 168 105 168 13 0 192 -165 267 -245 306 -328 521 -719 615 -1120 43 -183 59 -331 59 -545 -1 -293 -37 -523 -127 -795 -246 -750 -843 -1348 -1592 -1595 -281 -92 -492 -125 -808 -125 -316 0 -527 33 -808 125 -363 120 -716 338 -987 611 -509 511 -776 1220 -730 1942 32 509 188 933 496 1348 116 156 163 292 164 465 0 218 -95 414 -270 555 -38 30 -249 185 -467 344 -219 159 -540 393 -713 519 -367 268 -398 288 -505 323 -67 21 -99 26 -195 26 -140 1 -220 -19 -373 -93 -128 -62 -178 -112 -319 -310 -613 -868 -973 -1836 -1070 -2875 -19 -204 -16 -776 6 -980 41 -395 99 -707 197 -1050 628 -2216 2554 -3883 4820 -4174 291 -37 431 -46 754 -46 323 0 463 9 754 46 966 124 1899 505 2696 1101 1177 880 1981 2163 2246 3588 71 380 93 638 93 1065 0 376 -11 531 -60 845 -225 1459 -1028 2777 -2259 3705 -71 53 -136 100 -142 102 -7 3 -13 9 -13 13 0 5 65 105 145 223 139 206 171 263 200 352 13 39 47 127 68 172 5 12 10 41 12 65 1 24 5 51 10 61 13 31 -3 163 -31 245 -77 232 -240 391 -477 466 -103 33 -137 38 -343 56 -126 10 -344 24 -484 29 -140 6 -298 13 -350 16 -52 3 -324 12 -605 21 -280 8 -548 19 -595 24 -47 6 -134 10 -195 10 -60 0 -157 5 -215 10 -58 6 -316 15 -575 20 -258 6 -549 15 -645 20 -230 13 -1095 21 -1142 11z"/>
				</g>
			</svg>
		</a>
		</div>
	<% else %>
		<a href="/auth/discord?scope=guilds">Reauthenticate with guilds scope</a>
	<% end %>
	<!-- TWITCH -->
	<!-- TODO -->
</body>
</html>
